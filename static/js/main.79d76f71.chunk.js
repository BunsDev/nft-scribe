(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{130:function(e,t,n){e.exports=n(353)},136:function(e,t){},138:function(e,t){},160:function(e,t,n){},166:function(e,t){},168:function(e,t){},353:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),o=n(56),l=n(34),c=n(1),i=n(119),s=n(43),u=n(129),d=(n(160),n(125)),m=n(126),p="https://mainnet.infura.io/v3/84842078b09946638c03157f83405213",f="https://rinkeby.infura.io/v3/84842078b09946638c03157f83405213",b=new d.a({supportedChainIds:[1,3,4,5,42]});new m.a({urls:{1:p,4:f},defaultChainId:1,pollingInterval:8e3});var h=n(68),g=[{inputs:[{internalType:"address",name:"dictator",type:"address",indexed:!1},{internalType:"address",name:"tokenAddress",type:"address",indexed:!1},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"text",type:"string"}],type:"event",anonymous:!1,name:"Record"},{inputs:[{internalType:"address",name:"_tokenAddress",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"string",name:"_text",type:"string"}],name:"dictate",type:"function",constant:!1,outputs:[],payable:!1,stateMutability:"nonpayable"},{inputs:[{internalType:"bytes",name:"",type:"bytes"},{internalType:"uint256",name:"",type:"uint256"}],name:"documents",type:"function",constant:!0,outputs:[{internalType:"address",name:"dictator",type:"address"},{internalType:"string",name:"text",type:"string"},{internalType:"uint256",name:"creationTime",type:"uint256"}],payable:!1,stateMutability:"view"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"documentsCount",type:"function",constant:!0,outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view"},{constant:!0,inputs:[{internalType:"address",name:"_tokenAddress",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getDocumentKey",outputs:[{internalType:"bytes",name:"",type:"bytes"}],payable:!1,stateMutability:"pure",type:"function"}],E=[{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"_owner",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],y="0x9831151655180132E6131AB35A82a5e32C149116",v="0x284Dc68Afe4b30793acb7507a0Ae029d91bf698e",w="0xC207efACb12a126D382fA28460BB815F336D845f",C="",k=0,D=!1,I=!1,A={UNLOADED:0,LOADING_RECORDS:1,LOADED:2,SUBMITTING_DICTATION:3};function N(e){var t=new u.a(e);return t.pollingInterval=8e3,t}function T(e){var t=Object(s.b)(),n=t.connector,a=t.library,i=t.chainId,u=t.account,d=t.activate,m=c.useState([]),p=Object(l.a)(m,2),f=p[0],N=p[1],T=c.useState(A.UNLOADED),O=Object(l.a)(T,2),x=O[0],_=O[1];function S(){var e=document.getElementById("dictation").value.trim();return 0===e.length?null:e}function L(e){return 1===e?w:3===e?y:5===e?v:""}function j(e){return 1===e?"Mainnet":5===e?"Goerli":"..."}function B(e){var t=parseInt(e);return isNaN(t)||t<0?null:t}function R(){return B(document.getElementById("tokenId").value.trim())}function F(e){try{return h.utils.getAddress(e)}catch(t){return null}}function M(){return F(document.getElementById("tokenAddress").value)}function G(e){return U.apply(this,arguments)}function U(){return(U=Object(o.a)(r.a.mark((function e(t){var n,o,l,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=S())){e.next=4;break}return window.alert("Please provide a dictation."),e.abrupt("return");case 4:return console.log("Submitting dictation..."),o=new h.utils.Interface(g),l=o.functions.dictate.encode([C,k,n]),c={to:L(i),data:l,gasPrice:h.utils.bigNumberify(1e9*t)},s=a.getSigner(u),e.prev=9,e.next=12,s.sendTransaction(c).then((function(e){P(e)}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),_(A.LOADED);case 17:case"end":return e.stop()}}),e,null,[[9,14]])})))).apply(this,arguments)}function P(e){return K.apply(this,arguments)}function K(){return(K=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.getDefaultProvider(i),e.next=3,n.waitForTransaction(t.hash);case 3:_(A.LOADING_RECORDS),H();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return null==M()?(window.alert("Please provide a valid ERC721 contract address."),!1):null!=R()||(window.alert("Please provide a valid ERC721 token ID."),!1)}function q(e){return null===e.image_preview_url?"":e.image_preview_url}function z(){re({url:"",title:""}),_(A.UNLOADED)}function V(){var e=R();return"https://conlan.github.io/nft-scribe/?address="+M()+"&id="+e}function W(){J()&&(!function(e){var t=document.createElement("textarea");t.innerText=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}(V()),document.getElementById("share-button").src="copy-complete.png")}function X(){J()&&(_(A.LOADING_RECORDS),function(e){re({url:"",title:""});var t=R(),n=M(),a="https://api.opensea.io/api/v1/assets?token_ids="+t+"&asset_contract_address="+n;console.log(a),fetch(a,{crossDomain:!0,method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){var r="",o="";console.log(a),a.assets.length>0?(0!==q(a.assets[0]).length&&(r=q(a.assets[0])),o=function(e,t){return null!==e.name?e.name:null!==e.asset_contract&&null!==e.asset_contract.name?e.asset_contract.name+" #"+t:void 0}(a.assets[0],t)):(r="image-not-found.png",o="n/a"),re({url:r,title:o}),e().catch((function(e){window.alert(e),z()})),new h.Contract(n,E,h.getDefaultProvider(i)).tokenURI(t).then((function(e){try{var t=JSON.parse(e);t.ipfs&&re({url:"https://ipfs.infura.io/ipfs/"+t.ipfs,title:o})}catch(n){}})).catch((function(e){}))})).catch((function(e){window.alert(e),z()}))}(H))}function H(){return Q.apply(this,arguments)}function Q(){return(Q=Object(o.a)(r.a.mark((function e(){var t,n,a,o,l,c,s,d,m,p,f,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M(),n=R(),a=h.getDefaultProvider(i),o=new h.Contract(L(i),g,a),e.next=6,o.getDocumentKey(t,n);case 6:return l=e.sent,e.next=9,o.documentsCount(l);case 9:c=e.sent.toString(),s=[],d=0;case 12:if(!(d<c)){e.next=24;break}return e.next=15,o.documents(l,d);case 15:return m=e.sent,p=h.utils.getAddress(m.dictator),e.next=19,a.lookupAddress(p);case 19:m.ensName=e.sent,s.splice(0,0,m);case 21:d++,e.next=12;break;case 24:return C=t,k=n,N(s),f=new h.Contract(C,E,a),e.next=30,f.ownerOf(k);case 30:b=e.sent,ee(u===b),_(A.LOADED);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=c.useState(!1),Z=Object(l.a)(Y,2),$=Z[0],ee=Z[1],te=c.useState({url:"",title:""}),ne=Object(l.a)(te,2),ae=ne[0],re=ne[1],oe=c.useState(),le=Object(l.a)(oe,2),ce=le[0],ie=le[1];if(c.useEffect((function(){ce&&ce===n&&ie(void 0)}),[ce,n]),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(s.b)(),n=t.active,a=t.error,r=t.activate;Object(c.useEffect)((function(){var t=window.ethereum;if(t&&!n&&!a&&!e){var o=function(e){console.log("networkChanged",e),r(b)},l=function(e){console.log("accountsChanged",e),e.length>0&&r(b)};return t.on("networkChanged",o),t.on("accountsChanged",l),function(){t.removeListener("networkChanged",o),t.removeListener("accountsChanged",l)}}return function(){}}),[n,a,e,r])}(!function(){var e=Object(s.b)(),t=e.activate,n=e.active,a=Object(c.useState)(!1),r=Object(l.a)(a,2),o=r[0],i=r[1];return Object(c.useEffect)((function(){b.isAuthorized().then((function(e){e?t(b,void 0,!0).catch((function(){i(!0)})):i(!0)}))}),[t]),Object(c.useEffect)((function(){!o&&n&&i(!0)}),[o,n]),o}()||!!ce),!1===D){D=!0;try{if("URLSearchParams"in window){var se=new URLSearchParams(window.location.search),ue=null,de=null;if(se.has("address")){var me=se.get("address");ue=F(me)}if(se.has("id")){var pe=se.get("id");de=B(pe)}}null!==ue&&null!==de&&(console.log("found valid address + id, loading token..."),window.requestAnimationFrame((function(){document.getElementById("tokenAddress").value=ue,document.getElementById("tokenId").value=de,I=!0})))}catch(fe){console.log(fe)}}return I&&L(i).length>0&&(I=!1,X()),c.createElement("div",null,c.createElement("div",{className:"padded-div"},c.createElement("label",null,c.createElement("i",null,"NFT Scribe")," is a smart contract that allows ERC721 owners to append onchain messages and annotations to their tokens.")),c.createElement("hr",null),c.createElement("div",{className:"center-header-images-container"},c.createElement("div",{className:"inner-header-images"},c.createElement("img",{className:"hero-image",src:"scribe.gif",alt:"Scribe"}),0===ae.url.length&&c.createElement("img",{className:"nft-outline",alt:"Outline",src:"nft_outline.png"}),0!==ae.url.length&&c.createElement("img",{alt:"Token",className:"nft-overlay",src:ae.url}),0!==ae.title.length&&c.createElement("label",{className:"nft-overlay"},ae.title),(x===A.LOADING_RECORDS||x===A.SUBMITTING_DICTATION)&&c.createElement("img",{alt:"Spinner",className:"loading-spinner",src:"loading.gif"}),x===A.LOADED&&c.createElement("img",{alt:"Copy",id:"share-button",className:"share-button",src:"copy.png",onClick:function(){W()}}),x===A.LOADED&&c.createElement("img",{alt:"Copy",className:"tweet-button",src:"tweet.png",onClick:function(){!function(){if(J()){var e=V(),t=ae.title;t.length>50&&(t=t.substring(0,50)+"...");var n=(o=(o=M()).toLowerCase())==="0xb932a70A57673d89f4acfFBE830E8ed7f75Fb9e0".toLowerCase()||o==="0x41A322b28D0fF354040e2CbC676F0320d8c8850d".toLowerCase()?"SuperRare_co":o==="0x1d963688FE2209A98dB35C67A041524822Cf04ff".toLowerCase()?"marble_cards":o==="0x2a46f2ffd99e19a89476e2f62270e0a35bbf0756".toLowerCase()?"makersplaceco":o==="0xfbeef911dc5821886e1dda71586d90ed28174b7d".toLowerCase()?"KnownOrigin_io":o==="0x06012c8cf97BEaD5deAe237070F9587f8E7A266d".toLowerCase()?"CryptoKitties":o==="0x6aD0f855c97eb80665F2D0C7d8204895e052C373".toLowerCase()?"wildcards_world":o==="0x6aD0f855c97eb80665F2D0C7d8204895e052C373".toLowerCase()?"wildcards_world":o==="0x102C527714AB7e652630cAc7a30Abb482B041Fd0".toLowerCase()?"CryptoKaijuIO":o==="0x6EbeAf8e8E946F0716E6533A6f2cefc83f60e8Ab".toLowerCase()?"GodsUnchained":o==="0x79986aF15539de2db9A5086382daEdA917A9CF0C".toLowerCase()?"Cryptovoxels":null,a='See scribed messages for "'+t+'" ';null!==n&&(a+="(@"+n+") ");var r="https://twitter.com/intent/tweet?text="+(a=(a+="at "+(e=e.replace("&","%26"))).replace("#",""))+"&hashtags=NFT";window.open(r)}var o}()}}))),c.createElement("br",null),c.createElement("div",null,c.createElement("div",{className:"main-section"},c.createElement("label",null,c.createElement("b",null,"Token Address")),c.createElement("input",{id:"tokenAddress",placeholder:"0x..."}),c.createElement("label",null,c.createElement("b",null,"Token ID")),c.createElement("input",{id:"tokenId",type:"number",placeholder:"0, 1, 2, 3...",min:"0",defaultValue:"0"}),c.createElement("div",{className:"button-container"},!(!a||!u)&&c.createElement("button",{disabled:x===A.LOADING_RECORDS,className:"load-erc",onClick:function(){X()}},c.createElement("b",null,"Load ERC721")),!1===!!a&&c.createElement("button",{className:"connect-web3",onClick:function(){ie(b),d(b)}},"Connect to Web3")),x!==A.UNLOADED&&x!==A.LOADING_RECORDS&&$&&c.createElement("div",null,c.createElement("label",null,c.createElement("b",null,"Dictation")),c.createElement("input",{disabled:x===A.SUBMITTING_DICTATION,id:"dictation",placeholder:"Let it be known..."}),c.createElement("div",{className:"button-container"},c.createElement("button",{disabled:x===A.SUBMITTING_DICTATION,className:"submit-dictation",onClick:function(){var e;(null!==S()||(window.alert("Please provide a dictation."),0))&&(_(A.SUBMITTING_DICTATION),e=G,fetch("https://ethgasstation.info/json/ethgasAPI.json").then((function(e){return e.json()})).then((function(t){var n=t.fast;void 0===n?n=10:n/=10,e(n)})))}},c.createElement("b",null,"Submit Dictation")))),(x===A.LOADED||x===A.SUBMITTING_DICTATION)&&function(){var e=[];return f.forEach((function(t){var n,a=function(e){var t=(new Date).getTime()/1e3,n=Math.floor(t-e),a=Math.floor(n/60),r=Math.floor(a/60),o=Math.floor(r/24);return o>0?1===o?o+" day ago":o+" days ago":r>0?1===r?r+" hour ago":r+" hours ago":a>0?a+" min ago":n>0?1===n?n+" second ago":n+" seconds ago":"just recently"}(t.creationTime),r=t.text,o=j(i),l=null;if(l="Mainnet"===o?"https://etherscan.io/address/"+t.dictator:"https://"+o+".etherscan.io/address/"+t.dictator,null===t.ensName){var s=((n=t.dictator).length>20&&(n=n.substring(0,10)+"..."+n.substring(n.length-10,n.length)),n);e.push(c.createElement("div",{className:"record-line",key:r+t.creationTime.toString()},c.createElement("label",{className:"record-line"},c.createElement("b",null,c.createElement("a",{href:l,rel:"noopener noreferrer",target:"_blank"},s)),c.createElement("span",{className:"timestamp"}," \u2022 (",a,")"),c.createElement("br",null),c.createElement("br",null),r)))}else e.push(c.createElement("div",{className:"record-line",key:t.creationTime.toString()},c.createElement("label",{className:"record-line"},c.createElement("b",null,c.createElement("a",{href:l,rel:"noopener noreferrer",target:"_blank"},t.ensName)),c.createElement("span",{className:"timestamp"}," \u2022 (",a,")"),c.createElement("br",null),c.createElement("br",null),r)))})),0===e.length&&e.push(c.createElement("label",{key:"0"},"No records found for this token.")),e}())),c.createElement("hr",null),c.createElement("div",{className:"padded-div"},c.createElement("label",null,"v1.0.8 | ",c.createElement("b",null,c.createElement("a",{href:"https://github.com/conlan/nft-scribe",target:"_blank",rel:"noopener noreferrer"},"Github"))," | ",c.createElement("b",null,c.createElement("a",{href:"https://etherscan.io/address/0xC207efACb12a126D382fA28460BB815F336D845f",target:"_blank",rel:"noopener noreferrer"},"Contract"))," | ",c.createElement("a",{href:"https://chrome.google.com/webstore/detail/scribe-extension/fnegakfbbjdfcodbngocjeabbgdmpcad",target:"_blank",rel:"noopener noreferrer"},c.createElement("b",null,"Extension"))," | ",c.createElement("b",null,c.createElement("a",{href:"https://www.cryptovoxels.com/play?coords=S@279E,418N",target:"_blank",rel:"noopener noreferrer"},"Cryptovoxels"))," | "),c.createElement("label",null,"\u26d3",j(i)),c.createElement("br",null),c.createElement("label",null,"Please use at your own risk and double check ",c.createElement("a",{href:"https://ethgasstation.info/",target:"_blank",rel:"noopener noreferrer"},"gas price")," before submitting transaction \u26fd"),c.createElement("br",null),c.createElement("label",null,"Image and name metadata powered by ",c.createElement("a",{href:"https://opensea.io/",target:"_blank",rel:"noopener noreferrer"},"OpenSea")),c.createElement("br",null),c.createElement("label",null,c.createElement("a",{href:"https://giphy.com/stickers/geometric-heysp-illustrated-geometry-c6XT7hN1iSuUoNxD1b",target:"_blank",rel:"noopener noreferrer"},"Loading GIF Source"))))}i.render(c.createElement((function(){return c.createElement(s.a,{getLibrary:N},c.createElement(T,null))}),null),document.getElementById("root"))}},[[130,1,2]]]);
//# sourceMappingURL=main.79d76f71.chunk.js.map